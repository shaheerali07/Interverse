{"ast":null,"code":"var _jsxFileName = \"/home/hp/Learn/Interverse/Front-end/src/components/home/Welcome.js\";\nimport React, { useContext, useEffect, useState } from 'react';\nimport { Col, Row } from 'react-bootstrap'; // import socketIOClient from 'socket.io-client';\n\nimport openSocket from 'socket.io-client';\nimport { useHistory } from 'react-router-dom';\nimport UserContext from '../../userContext/UserContext';\nimport ChatBox from '../chat/chatBox';\nimport List from '../usersList/list';\nimport NavBar from './navbar';\nconst ENDPOINT = process.env.REACT_APP_BASE_URL;\nexport default function Welcome() {\n  const [user, setUser] = useState({});\n  const [onlineUsers, setOnlineUsers] = useState([]);\n  const [selectedUser, setSelectedUser] = useState({});\n  const [, userDispatch] = useContext(UserContext);\n  const socket = openSocket(ENDPOINT, {\n    transports: ['websocket']\n  });\n  let history = useHistory();\n  useEffect(() => {\n    let data = localStorage.getItem('userData');\n\n    if (JSON.parse(data)) {\n      socket.emit('new user', JSON.parse(data));\n      setUser(JSON.parse(data));\n      userDispatch({\n        type: 'SET_USER',\n        payload: JSON.parse(data)\n      });\n    }\n  }, []);\n  useEffect(() => {\n    return () => {\n      socket.on('server disconnected', function (userName) {\n        console.log(userName);\n        debugger;\n        let temp = [...onlineUsers];\n        temp.filter(user => user.id !== userName);\n        setOnlineUsers(temp);\n      });\n    };\n  }, []);\n  useEffect(() => {\n    socket.on('new user', function (data) {\n      setOnlineUsers(data);\n    });\n    socket.on('user disconnected', function (userName) {\n      console.log(userName);\n      debugger;\n      let temp = [...onlineUsers];\n      temp.filter(user => user.id !== userName);\n      setOnlineUsers(temp);\n    });\n  });\n\n  const handleLogOut = async () => {\n    await userDispatch({\n      type: 'LOGOUT'\n    });\n    history.push('/login');\n  };\n\n  const handleSelectedUser = (e, user) => {\n    setSelectedUser(user);\n  };\n\n  console.log(onlineUsers);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(NavBar, {\n    user: user,\n    handleLogOut: handleLogOut,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mainContent\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    className: \"mainContentRow\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    xs: true,\n    lg: \"4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(List, {\n    handleSelectedUser: handleSelectedUser,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    xs: true,\n    lg: \"8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ChatBox, {\n    selectedUser: selectedUser,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  })))));\n}","map":{"version":3,"sources":["/home/hp/Learn/Interverse/Front-end/src/components/home/Welcome.js"],"names":["React","useContext","useEffect","useState","Col","Row","openSocket","useHistory","UserContext","ChatBox","List","NavBar","ENDPOINT","process","env","REACT_APP_BASE_URL","Welcome","user","setUser","onlineUsers","setOnlineUsers","selectedUser","setSelectedUser","userDispatch","socket","transports","history","data","localStorage","getItem","JSON","parse","emit","type","payload","on","userName","console","log","temp","filter","id","handleLogOut","push","handleSelectedUser","e"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport { Col, Row } from 'react-bootstrap';\n// import socketIOClient from 'socket.io-client';\nimport openSocket from 'socket.io-client';\nimport { useHistory } from 'react-router-dom';\nimport UserContext from '../../userContext/UserContext';\nimport ChatBox from '../chat/chatBox';\nimport List from '../usersList/list';\nimport NavBar from './navbar';\nconst ENDPOINT = process.env.REACT_APP_BASE_URL;\nexport default function Welcome() {\n  const [user, setUser] = useState({});\n  const [onlineUsers, setOnlineUsers] = useState([]);\n  const [selectedUser, setSelectedUser] = useState({});\n  const [, userDispatch] = useContext(UserContext);\n  const socket = openSocket(ENDPOINT, { transports: ['websocket'] });\n  let history = useHistory();\n\n  useEffect(() => {\n    let data = localStorage.getItem('userData');\n    if (JSON.parse(data)) {\n      socket.emit('new user', JSON.parse(data));\n      setUser(JSON.parse(data));\n      userDispatch({ type: 'SET_USER', payload: JSON.parse(data) });\n    }\n  }, []);\n  useEffect(() => {\n    return () => {\n      socket.on('server disconnected', function (userName) {\n        console.log(userName);\n        debugger;\n        let temp = [...onlineUsers];\n        temp.filter(user => user.id !== userName);\n        setOnlineUsers(temp);\n      });\n    };\n  }, []);\n  useEffect(() => {\n    socket.on('new user', function (data) {\n      setOnlineUsers(data);\n    });\n    socket.on('user disconnected', function (userName) {\n      console.log(userName);\n      debugger;\n      let temp = [...onlineUsers];\n      temp.filter(user => user.id !== userName);\n      setOnlineUsers(temp);\n    });\n  });\n  const handleLogOut = async () => {\n    await userDispatch({ type: 'LOGOUT' });\n    history.push('/login');\n  };\n  const handleSelectedUser = (e, user) => {\n    setSelectedUser(user);\n  };\n  console.log(onlineUsers);\n  return (\n    <>\n      <NavBar user={user} handleLogOut={handleLogOut} />\n      <div className='mainContent'>\n        <Row className='mainContentRow'>\n          <Col xs lg='4'>\n            <List handleSelectedUser={handleSelectedUser} />\n          </Col>\n          <Col xs lg='8'>\n            <ChatBox selectedUser={selectedUser} />\n          </Col>\n        </Row>\n      </div>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}